# Unreal 基础知识

## 前言

最近发现，学习游戏引擎时，如果不勤记笔记，下场会很惨。当一个知识点学完过了一段时间后再返回，大概率，你会发现自己又有点无从下手了，所以”黑发不知记笔记早，白首方悔记笔记迟“，不如第一次学习的时候就勤劳的记下来，这样下次自己开始着手一些小项目但是忘记部分操作时可以通过查阅笔记来进行快速的回顾，不失为一种很好的方式。

## 虚幻引擎基础

![image-20240718021221482](https://raw.githubusercontent.com/CCCCOOH/PicturesBed/master/202407180212638.png)

- **Event Tick** 会在每一帧上进行执行
- **Event BeginPlay** 会在对象开始时进行执行

不要随意使用**Event Tick**，通常，**Event Tick** 被用于动态更新角色的速度，追踪物体等。

![image-20240718023450965](https://raw.githubusercontent.com/CCCCOOH/PicturesBed/master/202407180240728.png)

我在小球中创建了这样一个蓝图，拾取小球后打印一段文字，小球销毁，并且玩家强制型跳跃一次。

首先必须解释的是这里的`On Component Begin Overlap`是用来检测是否有物体与`Sphere`重叠的。 这里用到了`Cast To BP_ThirdPersonCharacter`将这个对象连接到了`Other Actor`上。所以会判断与之重叠的对象是否是我们的第三人称角色，这个是已有的一个蓝图类。如果匹配成果，执行右边最上面的三角形后的所有函数，如果匹配失败，执行`Cast Failed`后面的函数。最后的`jump`函数，匹配的目标是前面的第三人称玩家这个类，所以`Target`连接了他们。

![image-20240718025946386](https://raw.githubusercontent.com/CCCCOOH/PicturesBed/master/202407180356973.png)

然后我进行了一些更改，现在的功能是在销毁小球后会增加玩家的速度上限。

我们将碰撞重叠后触发的对象连接到`Character Movement`上，并用它来增加`Max Walk Speed`，增加量为`500.0`，将增加后的值赋值给`Set Max Walk Speed`中的最大行走速度上。

这里的`500.0`是增加的速度，显而易见，这是一个魔法数字，我们不希望使用这种难以知晓其意义的变量。在蓝图中可以在左下角的变量中来创建一个变量，点击变量右边的加号。创建好后别忘记编译，编译按钮在左上角，将变量设置并拖入中间的工作区，选择“获取这个变量”而不是设置它。然后将它连接到`500.0`左边的小绿点上即可，完成后如下图所示：

![image-20240718030708021](https://raw.githubusercontent.com/CCCCOOH/PicturesBed/master/202407180307370.png)

同时，我还学到了如何去使蓝图更加美观，也就是“蓝图规范”，基本上遵循两点：**添加结点，框选并按`Q`键使框选内容对齐。**

![image-20240718031003283](https://raw.githubusercontent.com/CCCCOOH/PicturesBed/master/202407180356260.png)

同时，还有一个快捷键：在地图场景启动游戏后，可以使用`Shift`+'F1'来出现鼠标。

刚才已经有了变量，如果想让这个变量可以在编辑器中编辑，类似于**Godot4**中的**export**，可以勾选变量细节里的可编辑实例，同时别忘记编译。

为了防止下一次忘记最简单的操作，这里记录一下编辑器中一些常用的操作：

- 鼠标右键 + 移动键(WASD/Arrow Key)可以用第一人称的视角在场景中进行移动
- `Ctrl+Space(空格)`可以弹出文件小柜子(我愿意这么叫它)
- 按住`Ctrl`拖出变量可以跳过询问，直接放置一个`Get`变量

## 创建函数

之前玩家增加速度那一套逻辑，全部都放在小球里面写的，方式是在小球中调用玩家的接口来完成这些操作，但这并不符合设计规范，我们应当把这些逻辑放到一个叫做`Increase Speed`的函数中进行封装。

首先，打开玩家场景。在左边函数上点击加号添加一个函数。

创建好函数后，将左上角的玩家移动组件拖入场景，点击函数最开始的紫色小方框，添加一个输入。

最后添加如下蓝图即可：

![image-20240718035402963](https://raw.githubusercontent.com/CCCCOOH/PicturesBed/master/202407180356814.png)

在小球中：

![image-20240718035421666](https://raw.githubusercontent.com/CCCCOOH/PicturesBed/master/202407180356365.png)

运行发现，碰到小球，小球消失，玩家加速，一气呵成。



